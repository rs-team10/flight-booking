(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b29b9be"],{"50e8":function(t,e,i){"use strict";var s=i("7b61"),a=i.n(s);a.a},"58b2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-layout",{attrs:{row:""}},[i("define-discount"),i("add-service")],1)],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-flex",{attrs:{xs9:"",sm9:"",md9:"",id:"add-service"}},[i("v-card",{staticClass:"mr-3 mt-2",staticStyle:{height:"870px"}},[i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",{staticClass:"indigo--text text-uppercase"},[i("span",{staticClass:"font-weight-light"},[t._v("Register new service")])])],1),i("v-layout",{attrs:{row:"","justify-center":""}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.adminDialog,callback:function(e){t.adminDialog=e},expression:"adminDialog"}},[i("div",[i("v-alert",{attrs:{value:t.adminError,type:"error",dismissible:""}},[t._v("\n                        "+t._s(this.adminError)+"\n                    ")])],1),i("v-form",{ref:"adminForm"},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("New administrator")])]),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{label:"First name"},model:{value:t.tempAdmin.firstName,callback:function(e){t.$set(t.tempAdmin,"firstName",e)},expression:"tempAdmin.firstName"}})],1),i("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{label:"Last name"},model:{value:t.tempAdmin.lastName,callback:function(e){t.$set(t.tempAdmin,"lastName",e)},expression:"tempAdmin.lastName"}})],1),i("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{label:"Username*","error-messages":t.usernameErrors},model:{value:t.tempAdmin.username,callback:function(e){t.$set(t.tempAdmin,"username",e)},expression:"tempAdmin.username"}})],1),i("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[i("v-text-field",{attrs:{label:"Password*","error-messages":t.passwordErrors},model:{value:t.tempAdmin.password,callback:function(e){t.$set(t.tempAdmin,"password",e)},expression:"tempAdmin.password"}})],1),i("v-flex",{attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Email*","error-messages":t.emailErrors},model:{value:t.tempAdmin.email,callback:function(e){t.$set(t.tempAdmin,"email",e)},expression:"tempAdmin.email"}})],1)],1)],1),i("small",[t._v("*indicates required field")])],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"indigo darken-1",flat:""},on:{click:t.close}},[t._v("Close")]),i("v-btn",{attrs:{color:"indigo darken-1",flat:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1)],1),i("v-card-text",[i("v-form",[i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs7:"",sm7:"",md7:""}},[i("v-layout",{staticClass:"mr-3",attrs:{column:""}},[i("v-text-field",{attrs:{solo:"","error-messages":t.nameErrors,label:"Name",required:""},model:{value:t.service.name,callback:function(e){t.$set(t.service,"name",e)},expression:"service.name"}}),i("v-select",{staticClass:"mt-0",attrs:{items:t.services,label:"Service",solo:"",dense:""},model:{value:t.pickedService,callback:function(e){t.pickedService=e},expression:"pickedService"}}),i("GmapAutocomplete",{staticClass:"custom-input-field mt-0 elevation-2",on:{place_changed:t.getLocationData}}),i("GmapMap",{staticClass:"custom-map",attrs:{center:t.currentMapCenter,zoom:14,"map-type-id":"terrain",options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,disableDefaultUi:!1}}},[this.service.location.latitude?i("GmapMarker",{attrs:{position:t.currentMapCenter,clickable:!1,draggable:!1}}):t._e()],1)],1)],1),i("v-flex",{attrs:{xs5:"",sm5:"",md5:""}},[i("v-layout",{attrs:{column:""}},[i("v-card",[i("v-toolbar",{attrs:{dense:"",flat:"",color:"white"}},[i("v-toolbar-title",{staticClass:"text-xs-center font-weight-light indigo--text"},[t._v("Administrators")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(e){t.adminDialog=!0}}},[i("v-icon",{attrs:{color:"indigo"}},[t._v("add")])],1)],1),i("v-list",{staticClass:"scroll-y",staticStyle:{height:"700px"},attrs:{"two-line":""}},[t._l(this.service.administrators,function(e){return[i("v-list-tile",{key:e.id},[i("v-list-tile-content",[i("v-list-tile-title",{staticClass:"font-weight-medium indigo--text"},[i("span",{staticClass:"font-weight-light"},[t._v("Username:")]),t._v(" "+t._s(e.username)+"\n                                        "),i("span",{staticClass:"font-weight-light ml-4"},[t._v("Password:")]),t._v(" "+t._s(e.password)+"\n                                    ")]),i("v-list-tile-sub-title",[t._v(t._s(e.firstName)+"  "+t._s(e.lastName))]),i("v-list-tile-sub-title",[t._v(t._s(e.email))])],1),i("v-icon",{staticClass:"mr-1",attrs:{color:"indigo"},on:{click:function(i){return t.deleteAdmin(e)}}},[t._v("\n                                    delete\n                                ")])],1),i("v-divider",{key:e.id})]})],2)],1),i("div",[i("v-btn",{attrs:{block:"",flat:"",outline:"",color:"indigo lighten-2"},on:{click:t.submit}},[t._v("submit")])],1)],1)],1)],1)],1)],1)],1)],1)},n=[],o=(i("6762"),i("2fdb"),i("ac6a"),i("7f7f"),i("1dce")),l=i("b5ae"),c={mixins:[o["validationMixin"]],validations:{service:{name:{required:l["required"]},location:{required:l["required"]}},tempAdmin:{username:{required:l["required"],minLength:Object(l["minLength"])(5)},password:{required:l["required"],minLength:Object(l["minLength"])(6)},email:{required:l["required"],email:l["email"]}}},data:function(){return{service:{name:"",location:{},administrators:[]},success:!1,error:!1,adminError:!1,adminDialog:!1,tempAdmin:{},currentMapCenter:{lat:21,lng:42},services:["AIRLINE","HOTEL","RENT-A-CAR"],pickedService:null}},computed:{nameErrors:function(){var t=[];return this.$v.service.name.$dirty?(!this.$v.service.name.required&&t.push("Name is required."),t):t},addressErrors:function(){var t=[];return this.$v.service.location.street.$dirty?(!this.$v.service.location.street.required&&t.push("Address is required."),t):t},usernameErrors:function(){var t=[];return this.$v.tempAdmin.username.$dirty?(!this.$v.tempAdmin.username.minLength&&t.push("Username must be at least 5 characters long"),!this.$v.tempAdmin.username.required&&t.push("Username is required."),t):t},passwordErrors:function(){var t=[];return this.$v.tempAdmin.password.$dirty?(!this.$v.tempAdmin.password.minLength&&t.push("Password must be at least 6 characters long"),!this.$v.tempAdmin.password.required&&t.push("Password is required."),t):t},emailErrors:function(){var t=[];return this.$v.tempAdmin.email.$dirty?(!this.$v.tempAdmin.email.email&&t.push("E-mail invalid."),!this.$v.tempAdmin.email.required&&t.push("Email is required."),t):t}},methods:{submit:function(){this.$v.service.$touch(),this.$v.service.$invalid||(this.adminEmpty()?this.$swal("At least one administrator must be added!","","warning"):this.addservice())},addservice:function(){null!=this.pickedService?"AIRLINE"==this.pickedService?this.saveAirline():"HOTEL"==this.pickedService?this.saveHotel():"RENT-A-CAR"==this.pickedService&&this.saveRentACar():this.$swal("You must pick a service!","","warning")},saveAirline:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.$axios.post("/api/airlines",this.service,e).then(function(e){t.$swal("Registration successfull","Airline "+e.data.name+" registered successfully","success")}).catch(function(e){t.$swal(e.response.data,"","error")})},saveHotel:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.$axios.post("/api/hotels",this.service,e).then(function(e){t.$swal("Registration successfull","Hotel "+e.data.name+" registered successfully","success")}).catch(function(e){t.$swal(e.response.data,"","error")})},saveRentACar:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.$axios.post("/api/rentACars",this.service,e).then(function(e){t.$swal("Registration successfull","Rent-a-car service "+e.data.name+" registered successfully","success")}).catch(function(e){t.$swal(e.response.data,"","error")})},close:function(){this.adminDialog=!1,this.tempAdmin=Object.assign({},{})},save:function(){this.$v.tempAdmin.$touch(),this.$v.tempAdmin.$invalid||(this.adminExists(this.tempAdmin.username)?this.adminError="Administrator with that username already added":(this.service.administrators.push(this.tempAdmin),this.close()))},adminExists:function(t){for(var e=0;e<this.service.administrators.length;e++)if(this.service.administrators[e].username==t)return!0;return!1},adminEmpty:function(){return 0==this.service.administrators.length},deleteAdmin:function(t){this.service.administrators.pop(t)},getLocationData:function(t){t&&(this.service.location=this.extractLocationData(t),this.currentMapCenter={lat:this.service.location.latitude,lng:this.service.location.longitude})},extractLocationData:function(t){var e={};return e.latitude=t.geometry.location.lat(),e.longitude=t.geometry.location.lng(),e.street=t.name,e.formattedAddress=t.formatted_address,t.address_components.forEach(function(t){t.types.includes("country")?e.country=t.long_name:t.types.includes("locality")&&(e.city=t.long_name)}),e}}},d=c,m=(i("50e8"),i("2877")),u=i("6544"),v=i.n(u),h=i("0798"),p=i("8336"),f=i("b0af"),g=i("99d9"),x=i("12b2"),b=i("a523"),w=i("169a"),A=i("ce7e"),$=i("0e8f"),y=i("4bd4"),C=i("132d"),k=i("a722"),_=i("8860"),V=i("ba95"),E=i("5d23"),P=i("b56d"),S=i("9910"),D=i("2677"),L=i("71d9"),q=i("2a7f"),T=Object(m["a"])(d,r,n,!1,null,"133aa836",null),N=T.exports;v()(T,{VAlert:h["a"],VBtn:p["a"],VCard:f["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:x["a"],VContainer:b["a"],VDialog:w["a"],VDivider:A["a"],VFlex:$["a"],VForm:y["a"],VIcon:C["a"],VLayout:k["a"],VList:_["a"],VListTile:V["a"],VListTileContent:E["a"],VListTileSubTitle:E["b"],VListTileTitle:E["c"],VSelect:P["a"],VSpacer:S["a"],VTextField:D["a"],VToolbar:L["a"],VToolbarTitle:q["b"]});var R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-flex",{attrs:{xs3:"",sm3:"",md3:""}},[i("v-card",{staticClass:"mx-3 mt-2 scroll-y",staticStyle:{height:"870px"}},[i("v-toolbar",{attrs:{flat:"",dense:"",color:"white"}},[i("v-toolbar-title",{staticClass:"indigo--text text-uppercase"},[i("span",{staticClass:"font-weight-light"},[t._v("Discounts")]),i("span",[t._v("%")])]),i("v-spacer"),i("v-btn",{attrs:{flat:"",color:"indigo"},on:{click:function(e){t.lista=[]}}},[t._v("\n                clear \n            ")]),i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.saveDiscounts()}}},[i("v-icon",{attrs:{color:"indigo"}},[t._v("save")])],1),i("v-btn",{attrs:{icon:""},on:{click:function(e){return t.openDialog()}}},[i("v-icon",{attrs:{color:"indigo"}},[t._v("add")])],1)],1),i("v-card-text",{staticClass:"pt-0"},[i("v-dialog",{attrs:{"max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",[i("v-toolbar",{attrs:{color:"indigo lighten-2"}},[i("v-toolbar-title",[i("span",{staticClass:"white--text font-weight-light"},[t._v("Add discount")])])],1),i("v-card-text",[i("v-layout",{attrs:{row:""}},[i("v-text-field",{staticClass:"mr-3",attrs:{type:"number",label:"Min points",disabled:0!=this.lista.length,"persistent-hint":""},model:{value:t.value.minPoints,callback:function(e){t.$set(t.value,"minPoints",e)},expression:"value.minPoints"}}),i("v-text-field",{attrs:{type:"number",label:"Max points","persistent-hint":""},model:{value:t.value.maxPoints,callback:function(e){t.$set(t.value,"maxPoints",e)},expression:"value.maxPoints"}}),i("v-icon",{staticClass:"mx-3",attrs:{color:"indigo"}},[t._v("arrow_forward")]),i("v-text-field",{attrs:{type:"number",label:"Discount (%)","persistent-hint":""},model:{value:t.value.discount,callback:function(e){t.$set(t.value,"discount",e)},expression:"value.discount"}}),i("v-btn",{staticClass:"mt-3",attrs:{flat:"",color:"indigo"},on:{click:t.addDiscount}},[t._v("Submit")])],1)],1)],1)],1),t._l(t.lista,function(e){return i("v-flex",{key:e.id},[i("v-layout",{staticClass:"mt-5",attrs:{row:""}},[i("v-flex",{staticClass:"title font-weight-light indigo--text mt-1",attrs:{xs2:"",sm2:"",md2:""}},[i("span",{staticClass:"display-1"},[t._v(t._s(e.discount)+"%")])]),i("v-flex",{attrs:{xs10:"",sm10:"",md10:""}},[i("v-range-slider",{staticClass:"mx-4",attrs:{readonly:"","thumb-label":"always","thumb-color":"indigo lighten-2",color:"indigo lighten-2",min:e.minPoints,max:e.maxPoints},model:{value:e.arr,callback:function(i){t.$set(e,"arr",i)},expression:"item.arr"}})],1)],1),i("v-divider")],1)})],2)],1)],1)},I=[],M={data:function(){return{lista:[],dialog:!1,value:{},arr:[]}},methods:{openDialog:function(){0!=this.lista.length&&(this.value.minPoints=parseInt(this.lista.slice(-1).pop().maxPoints)+1),this.dialog=!0},addDiscount:function(){this.value.minPoints>=this.value.maxPoints?this.$swal("Max value must be biger than min value","","warning"):this.value.minPoints<1||this.value.maxPoints<1?this.$swal("Values must be bigger than zero.","","warning"):(this.arr=new Array(this.value.minPoints,this.value.maxPoints),this.value.arr=this.arr,this.lista.push(this.value),this.value={},this.arr=[],this.dialog=!1)},saveDiscounts:function(){for(var t={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},e=[],i=0;i<this.lista.length;i++)e.push({discount:this.lista[i].discount,minPoints:this.lista[i].minPoints,maxPoints:this.lista[i].maxPoints});this.$axios.post("/api/discounts",e,t)}},mounted:function(){var t=this,e={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};this.$axios.get("/api/discounts",e).then(function(e){t.lista=e.data;for(var i=0;i<t.lista.length;i++)t.lista[i].arr=new Array(t.lista[i].minPoints,t.lista[i].maxPoints)})}},z=M,O=i("5963"),j=Object(m["a"])(z,R,I,!1,null,null,null),B=j.exports;v()(j,{VBtn:p["a"],VCard:f["a"],VCardText:g["b"],VDialog:w["a"],VDivider:A["a"],VFlex:$["a"],VIcon:C["a"],VLayout:k["a"],VRangeSlider:O["a"],VSpacer:S["a"],VTextField:D["a"],VToolbar:L["a"],VToolbarTitle:q["b"]});var F={components:{"add-service":N,"define-discount":B}},H=F,U=Object(m["a"])(H,s,a,!1,null,null,null);e["default"]=U.exports;v()(U,{VLayout:k["a"]})},"7b61":function(t,e,i){}}]);
//# sourceMappingURL=chunk-1b29b9be.50232467.js.map